<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Python操作Kafka错误日志</title>
    <link href="/2023/11/23/Python%E6%93%8D%E4%BD%9CKafka/"/>
    <url>/2023/11/23/Python%E6%93%8D%E4%BD%9CKafka/</url>
    
    <content type="html"><![CDATA[<h2 id="问题一：无法打开zookeeper"><a href="#问题一：无法打开zookeeper" class="headerlink" title="问题一：无法打开zookeeper"></a>问题一：无法打开zookeeper</h2><blockquote><p>由于我kafka下载的版本是2.12-2.4.0,所以内置了zookeeper，不用单独下载</p></blockquote><ul><li><p>错误一：这个问题其实是由于我太久没有操作cmd导致的，我忘记了同盘下，切目录需要使用cd，导致系统找不到该路径</p></li><li><p>错误二：但仅仅这样还是会错误，仍然是系统找不到该路径</p><p>  所以我们还需要做以下操作：</p><p>  在你所对应的kafka目录下要自己手动创建两个名为”data”和”logs”的文件夹，方便后续安排路径</p><p>  <img src="/Python%E6%93%8D%E4%BD%9CKafka+e9c01916-b310-492e-9f7e-e2258080549d/image.png" alt="image.png"></p><p>  接着，打开config&#x2F;zookeeper.properties(使用vscode或者记事本打开都可以)，我们来改一下配置，红框中是你所需要改的，默认是tmp什么的，改成刚刚手动创建的data文件位置即可；同时注意观察下面的客户端口号是否为2181(zookeeper默认就是这个，有些博主说只要改成对应的端口号就都可以使用，我没改)</p><p>  ![image.png](Python操作Kafka+e9c01916-b310-492e-9f7e-e2258080549d&#x2F;image 1.png)</p><p>  下一步，打开config&#x2F;server.properties，同样也是更改配置，同理，也要检查好你的地址和端口号</p><p>  ![image.png](Python操作Kafka+e9c01916-b310-492e-9f7e-e2258080549d&#x2F;image 2.png)</p><p>  ![image.png](Python操作Kafka+e9c01916-b310-492e-9f7e-e2258080549d&#x2F;image 3.png)</p></li><li><p>错误三：然后我们再来尝试打开，结果是kafka正常打开，zookeeper仍然找不到路径，这是为什么呢？于是我通过搜索找到了问题的原因：由于kafka是使用Java进行编写的，所以，应该是Java环境存在问题 <strong>↓</strong></p><p>  参考文章<a href="https://blog.csdn.net/GoodburghCottage/article/details/125896525">Windows10下安装Kafka超级详细的教程（包含安装过程中遇到的问题和解决办法）</a></p><p>  解决方法：打开 kafka\bin\windows\kafka-run-class.bat ⽂件。</p></li></ul><p>进⼊kafka⽬录 ，打开上⾯说到的这个⽂件，查找后的内容如下所⽰。</p><pre><code class="hljs">![image.png](Python操作Kafka+e9c01916-b310-492e-9f7e-e2258080549d/image 4.png)</code></pre><p>具体原因请看这个博主的说法<a href="%5Bhttps://blog.csdn.net/VinceZxy/article/details/100153085%5D(https://blog.csdn.net/VinceZxy/article/details/100153085)">.\bin\windows\kafka-server-start.bat .\config\server.properties 系统找不到指定路径，启动zookeeper时候闪退</a></p><p>雀食，我的原因也是这个，由于已经在Java环境中写了&#x2F;bin，查找路径的时候仍然写上了&#x2F;bin，结果路径就变成了&#x2F;bin&#x2F;bin，自然就找不到路径了</p><h2 id="问题二：操作Kafka写代码报错"><a href="#问题二：操作Kafka写代码报错" class="headerlink" title="问题二：操作Kafka写代码报错"></a>问题二：操作Kafka写代码报错</h2><p>zookeeper和kafka都已经启动就绪</p><p>错误一：一定要注意是否打开了MySQL服务，数据库是否连接好，参数配置是否设置正确</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python">conn = pymysql.connect(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, user=<span class="hljs-string">&#x27;root&#x27;</span>, password=<span class="hljs-string">&#x27;your_password&#x27;</span>, database=<span class="hljs-string">&#x27;数据采集与处理&#x27;</span>)<br></code></pre></td></tr></table></figure><p>错误二：字段类型为data无法被自动处理成json格式，需要函数strftime()转换成字符串格式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-string">&#x27;birthday&#x27;</span>: row[<span class="hljs-number">3</span>].strftime(<span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>)<br></code></pre></td></tr></table></figure><p>错误三：如果像以下这么写会报错</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python">producer = KafkaProducer(bootstrap_servers=<span class="hljs-string">&#x27;localhost:9092&#x27;</span>)<br></code></pre></td></tr></table></figure><p>可以多加一个api(api版本就是你的kafka对应版本)  <strong>↓</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Python">producer = KafkaProducer(bootstrap_servers=<span class="hljs-string">&#x27;localhost:9092&#x27;</span>, api_version=(<span class="hljs-number">2</span>, <span class="hljs-number">12</span>, <span class="hljs-number">2</span>))<br></code></pre></td></tr></table></figure><h2 id="未解决问题"><a href="#未解决问题" class="headerlink" title="未解决问题"></a>未解决问题</h2><p>每次打印直接输出整个消息，无法每行分开打印（整个写循环改打印规则，不想改了）</p><p>kafka_2.12-2.4.0\bin\windows&gt;kafka-server-start.bat ….\config&#x2F;server.properties</p><p>kafka_2.12-2.4.0\bin\windows&gt;zookeeper-server-start.bat ….\config&#x2F;zookeeper.properties</p>]]></content>
    
    
    <categories>
      
      <category>错误日志</category>
      
    </categories>
    
    
    <tags>
      
      <tag>error</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/11/23/hello-world/"/>
    <url>/2023/11/23/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
